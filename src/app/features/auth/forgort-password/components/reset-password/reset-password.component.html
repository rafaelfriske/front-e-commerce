<app-header></app-header>

<div class="reset-password-container">
    <div class="reset-password-card">
        <h1 class="reset-password-title">Esqueceu sua senha?</h1>
        <p class="reset-password-subtitle">Para redefinir sua senha, insira o código que enviamos para o seu email.</p>

        <form [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()">
            <div class="form-group">
                <label for="code">Código</label>
                <input type="text" id="code" formControlName="code" placeholder="0000"
                    [ngClass]="{'invalid': resetPasswordForm.get('code')?.invalid && resetPasswordForm.get('code')?.touched}">
                <div class="error-message"
                    *ngIf="resetPasswordForm.get('code')?.invalid && resetPasswordForm.get('code')?.touched">
                    <span *ngIf="resetPasswordForm.get('code')?.errors?.['required']">Código é obrigatório</span>
                    <span *ngIf="resetPasswordForm.get('code')?.errors?.['minlength']">Código deve ter pelo menos 4
                        caracteres</span>
                </div>
            </div>

            <div class="form-group">
                <label for="password">Nova senha</label>
                <div class="input-container">
                    <i class="input-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="#2196F3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                    </i>
                    <input [type]="hidePassword ? 'password' : 'text'" id="password" formControlName="password"
                        [ngClass]="{'invalid': resetPasswordForm.get('password')?.invalid && resetPasswordForm.get('password')?.touched}">
                    <button type="button" class="toggle-password" (click)="togglePasswordVisibility()">
                        <svg *ngIf="hidePassword" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                            viewBox="0 0 24 24" fill="none" stroke="#aaa" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                            <circle cx="12" cy="12" r="3"></circle>
                        </svg>
                        <svg *ngIf="!hidePassword" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                            viewBox="0 0 24 24" fill="none" stroke="#2196F3" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                            <circle cx="12" cy="12" r="3"></circle>
                            <line x1="1" y1="1" x2="23" y2="23"></line>
                        </svg>
                    </button>
                </div>
                <div class="error-message"
                    *ngIf="resetPasswordForm.get('password')?.invalid && resetPasswordForm.get('password')?.touched">
                    <span *ngIf="resetPasswordForm.get('password')?.errors?.['required']">Senha é obrigatória</span>
                    <span *ngIf="resetPasswordForm.get('password')?.errors?.['minlength']">Senha deve ter pelo menos 8
                        caracteres</span>
                </div>
            </div>

            <div class="form-group">
                <label for="confirmPassword">Confirmar senha</label>
                <div class="input-container">
                    <i class="input-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="#2196F3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                    </i>
                    <input [type]="hideConfirmPassword ? 'password' : 'text'" id="confirmPassword"
                        formControlName="confirmPassword"
                        [ngClass]="{'invalid': resetPasswordForm.get('confirmPassword')?.invalid && resetPasswordForm.get('confirmPassword')?.touched}">
                    <button type="button" class="toggle-password" (click)="toggleConfirmPasswordVisibility()">
                        <svg *ngIf="hideConfirmPassword" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                            viewBox="0 0 24 24" fill="none" stroke="#aaa" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                            <circle cx="12" cy="12" r="3"></circle>
                        </svg>
                        <svg *ngIf="!hideConfirmPassword" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                            viewBox="0 0 24 24" fill="none" stroke="#2196F3" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                            <circle cx="12" cy="12" r="3"></circle>
                            <line x1="1" y1="1" x2="23" y2="23"></line>
                        </svg>
                    </button>
                </div>
                <div class="error-message"
                    *ngIf="resetPasswordForm.get('confirmPassword')?.invalid && resetPasswordForm.get('confirmPassword')?.touched">
                    <span *ngIf="resetPasswordForm.get('confirmPassword')?.errors?.['required']">Confirmação de senha é
                        obrigatória</span>
                    <span *ngIf="resetPasswordForm.get('confirmPassword')?.errors?.['mismatch']">Senhas não
                        conferem</span>
                </div>
            </div>

            <div class="error-message" *ngIf="submitError">
                {{ submitError }}
            </div>

            <button type="submit" class="confirm-button" [disabled]="isSubmitting">
                {{ isSubmitting ? 'PROCESSANDO...' : 'CONFIRMAR' }}
            </button>
        </form>
    </div>
</div>

<app-footer></app-footer>